<!doctype html>
<html>
<head>

  <title>tracking.js - hello world</title>

  <meta charset="utf-8">

  <script src="../src/numeric.js"></script>
  <script src="../build/tracking.js"></script>
  <script src="offlineData.js"></script>

  <style>
  #rect {
    border: 2px solid magenta;
    height: 80px;
    left: -1000px;
    position: absolute;
    top: -1000px;
    width: 120px;
  }
  </style>
</head>
<body>
  <div id="rect"></div>
  <img id="img" src="assets/psmove.png" />

  <script>
    // var m = [];
    // console.log(cameraIntrinsicParameters);
    var start = new Date();
    var keypointMatches = [];
    var cameraPose = new tracking.Matrix({matrix: cameraPose});
    var cameraIntrinsicParameters = new tracking.Matrix({matrix: cameraIntrinsicParameters});


    for (var i = 0; i < 50; i++) {
      var keys = keypoints[i++];
      var keypoint = new tracking.Vector([keys[0], keys[1], keys[2], 1]);
      var vec = new tracking.Vector({matrix: cameraIntrinsicParameters.multiply(cameraPose.multiply(keypoint._matrix))});
      var value = 1/vec._matrix.data[2][0];
      var vecData = vec.multiply(value);
      keypointMatches.push({templateKeypoint: new tracking.Vector(keys), frameKeypoint: new tracking.Vector([vecData._matrix.data[0][0], vecData._matrix.data[1][0]])});
    }



console.log(keypointMatches);
//     tracking.ePnP.estimatePose(cameraIntrinsicParameters, keypointMatches);
console.log((new Date() - start) + 'ms');
    // for (var i = 0; i < 2; i++) {
    //   m.push(Math.floor(Math.random()*2 + 2));
    // }

    // var matrix = new tracking.Matrix({
    //   matrix: [[2, 3, 2, 3, 3, 2, 3, 3, 3, 3, 2, 3],
    //           [3, 2, 2, 2, 3, 3, 3, 2, 3, 2, 3, 2],
    //           [2, 2, 2, 2, 2, 3, 2, 3, 2, 3, 2, 3],
    //           [3, 2, 2, 2, 2, 3, 3, 3, 3, 3, 2, 3],
    //           [2, 3, 2, 3, 2, 3, 2, 2, 2, 3, 2, 3],
    //           [2, 3, 2, 2, 3, 2, 3, 2, 2, 3, 2, 2],
    //           [3, 3, 3, 2, 2, 2, 2, 3, 3, 3, 2, 3],
    //           [3, 3, 2, 2, 3, 3, 2, 2, 3, 2, 3, 3],
    //           [2, 3, 2, 3, 3, 2, 3, 3, 3, 3, 2, 3],
    //           [2, 3, 2, 3, 3, 2, 3, 3, 3, 3, 2, 3],
    //           [2, 3, 2, 3, 3, 2, 3, 3, 3, 3, 2, 3],
    //           [2, 3, 2, 3, 3, 2, 3, 3, 3, 3, 2, 3]]
    // });

    //   var matrix = new tracking.Matrix({
    //   matrix: [[1, 1, -1],
    //           [2, 1, -2],
    //           [7, 2, -5]]
    // });


    // for (i = 0; i < 12; i++) {
    //   for (var j = 0; j < 12; j++) {
    //     matrix.data[i][j] = m[Math.floor(Math.random()*2)];
    //   }
    // }
    // console.log(matrix.invert3by3().toString());
    
    // console.log(matrix.multiply(tracking.ePnP.findNullEigenVectors(matrix)[0]._matrix).toString());

    // var vector1 = new tracking.Vector({matrix: new tracking.Matrix({matrix: [[1], [2], [3]]})});
    // var vector2 = new tracking.Vector({matrix: new tracking.Matrix({matrix: [[2], [2], [2]]})});

    // console.log(tracking.Vector.subtract(vector1, vector2).toString());

    // console.log(vector1.multiply(2).toString());

    // console.log(matrix.reducedRowEchelon().toString());
    
    // var p1 = new tracking.Vector([0, 0, 0]);
    // var p2 = new tracking.Vector([1, 0, 0]);
    // var p3 = new tracking.Vector([0, 1, 0]);
    // var p4 = new tracking.Vector([0, 0, 1]);

    // var p = new tracking.Vector([1, 2, 3]);

// console.log(tracking.ePnP.findBarycentricCoordenates(p, [p1, p2, p3, p4]));

  </script>

</body>
</html>
